!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=function(t){e.ARRAY_TYPE=a=t},e.toRadian=function(t){return t*i},e.equals=function(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))};var n=e.EPSILON=1e-6,a=e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,i=(e.RANDOM=Math.random,Math.PI/180)},function(t,e,r){"use strict";function n(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],f=e[4],u=e[5],s=e[6],c=e[7],h=e[8],d=r[0],l=r[1],M=r[2],_=r[3],R=r[4],v=r[5],m=r[6],I=r[7],E=r[8];return t[0]=d*n+l*o+M*s,t[1]=d*a+l*f+M*c,t[2]=d*i+l*u+M*h,t[3]=_*n+R*o+v*s,t[4]=_*a+R*f+v*c,t[5]=_*i+R*u+v*h,t[6]=m*n+I*o+E*s,t[7]=m*a+I*f+E*c,t[8]=m*i+I*u+E*h,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new i.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new i.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,r,n,a,o,f,u,s){var c=new i.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=a,c[5]=o,c[6]=f,c[7]=u,c[8]=s,c},e.set=function(t,e,r,n,a,i,o,f,u,s){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t[6]=f,t[7]=u,t[8]=s,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],f=e[5],u=e[6],s=e[7],c=e[8],h=c*o-f*s,d=-c*i+f*u,l=s*i-o*u,M=r*h+n*d+a*l;return M?(M=1/M,t[0]=h*M,t[1]=(-c*n+a*s)*M,t[2]=(f*n-a*o)*M,t[3]=d*M,t[4]=(c*r-a*u)*M,t[5]=(-f*r+a*i)*M,t[6]=l*M,t[7]=(-s*r+n*u)*M,t[8]=(o*r-n*i)*M,t):null},e.adjoint=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],f=e[5],u=e[6],s=e[7],c=e[8];return t[0]=o*c-f*s,t[1]=a*s-n*c,t[2]=n*f-a*o,t[3]=f*u-i*c,t[4]=r*c-a*u,t[5]=a*i-r*f,t[6]=i*s-o*u,t[7]=n*u-r*s,t[8]=r*o-n*i,t},e.determinant=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],o=t[5],f=t[6],u=t[7],s=t[8];return e*(s*i-o*u)+r*(-s*a+o*f)+n*(u*a-i*f)},e.multiply=n,e.translate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],f=e[4],u=e[5],s=e[6],c=e[7],h=e[8],d=r[0],l=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=f,t[5]=u,t[6]=d*n+l*o+s,t[7]=d*a+l*f+c,t[8]=d*i+l*u+h,t},e.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],f=e[4],u=e[5],s=e[6],c=e[7],h=e[8],d=Math.sin(r),l=Math.cos(r);return t[0]=l*n+d*o,t[1]=l*a+d*f,t[2]=l*i+d*u,t[3]=l*o-d*n,t[4]=l*f-d*a,t[5]=l*u-d*i,t[6]=s,t[7]=c,t[8]=h,t},e.scale=function(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r+r,f=n+n,u=a+a,s=r*o,c=n*o,h=n*f,d=a*o,l=a*f,M=a*u,_=i*o,R=i*f,v=i*u;return t[0]=1-h-M,t[3]=c-v,t[6]=d+R,t[1]=c+v,t[4]=1-s-M,t[7]=l-_,t[2]=d-R,t[5]=l+_,t[8]=1-s-h,t},e.normalFromMat4=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],f=e[5],u=e[6],s=e[7],c=e[8],h=e[9],d=e[10],l=e[11],M=e[12],_=e[13],R=e[14],v=e[15],m=r*f-n*o,I=r*u-a*o,E=r*s-i*o,b=n*u-a*f,A=n*s-i*f,p=a*s-i*u,x=c*_-h*M,w=c*R-d*M,y=c*v-l*M,g=h*R-d*_,T=h*v-l*_,P=d*v-l*R,L=m*P-I*T+E*g+b*y-A*w+p*x;return L?(L=1/L,t[0]=(f*P-u*T+s*g)*L,t[1]=(u*y-o*P-s*w)*L,t[2]=(o*T-f*y+s*x)*L,t[3]=(a*T-n*P-i*g)*L,t[4]=(r*P-a*y+i*w)*L,t[5]=(n*y-r*T-i*x)*L,t[6]=(_*p-R*A+v*b)*L,t[7]=(R*E-M*p-v*I)*L,t[8]=(M*A-_*E+v*m)*L,t):null},e.projection=function(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},e.subtract=a,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],f=t[4],u=t[5],s=t[6],c=t[7],h=t[8],d=e[0],l=e[1],M=e[2],_=e[3],R=e[4],v=e[5],m=e[6],I=e[7],E=e[8];return Math.abs(r-d)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-l)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-M)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(o-_)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(f-R)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(u-v)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(s-m)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(c-I)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(h-E)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(E))};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.mul=n,e.sub=a},function(t,e,r){"use strict";function n(){var t=new M.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function i(t,e,r){var n=new M.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function f(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function u(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function s(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(r*r+n*n+a*a)}function c(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a}function h(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function d(t,e){var r=e[0],n=e[1],a=e[2],i=r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i),t}function l(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=n,e.clone=function(t){var e=new M.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=a,e.fromValues=i,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},e.subtract=o,e.multiply=f,e.divide=u,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},e.distance=s,e.squaredDistance=c,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=d,e.dot=l,e.cross=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[0],f=r[1],u=r[2];return t[0]=a*u-i*f,t[1]=i*o-n*u,t[2]=n*f-a*o,t},e.lerp=function(t,e,r,n){var a=e[0],i=e[1],o=e[2];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=o+n*(r[2]-o),t},e.hermite=function(t,e,r,n,a,i){var o=i*i,f=o*(2*i-3)+1,u=o*(i-2)+i,s=o*(i-1),c=o*(3-2*i);return t[0]=e[0]*f+r[0]*u+n[0]*s+a[0]*c,t[1]=e[1]*f+r[1]*u+n[1]*s+a[1]*c,t[2]=e[2]*f+r[2]*u+n[2]*s+a[2]*c,t},e.bezier=function(t,e,r,n,a,i){var o=1-i,f=o*o,u=i*i,s=f*o,c=3*i*f,h=3*u*o,d=u*i;return t[0]=e[0]*s+r[0]*c+n[0]*h+a[0]*d,t[1]=e[1]*s+r[1]*c+n[1]*h+a[1]*d,t[2]=e[2]*s+r[2]*c+n[2]*h+a[2]*d,t},e.random=function(t,e){e=e||1;var r=2*M.RANDOM()*Math.PI,n=2*M.RANDOM()-1,a=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=n*e,t},e.transformMat4=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[3]*n+r[7]*a+r[11]*i+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*a+r[8]*i+r[12])/o,t[1]=(r[1]*n+r[5]*a+r[9]*i+r[13])/o,t[2]=(r[2]*n+r[6]*a+r[10]*i+r[14])/o,t},e.transformMat3=function(t,e,r){var n=e[0],a=e[1],i=e[2];return t[0]=n*r[0]+a*r[3]+i*r[6],t[1]=n*r[1]+a*r[4]+i*r[7],t[2]=n*r[2]+a*r[5]+i*r[8],t},e.transformQuat=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[0],f=r[1],u=r[2],s=r[3],c=s*n+f*i-u*a,h=s*a+u*n-o*i,d=s*i+o*a-f*n,l=-o*n-f*a-u*i;return t[0]=c*s+l*-o+h*-u-d*-f,t[1]=h*s+l*-f+d*-o-c*-u,t[2]=d*s+l*-u+c*-f-h*-o,t},e.rotateX=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},e.rotateY=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},e.rotateZ=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},e.angle=function(t,e){var r=i(t[0],t[1],t[2]),n=i(e[0],e[1],e[2]);d(r,r),d(n,n);var a=l(r,n);return a>1?0:a<-1?Math.PI:Math.acos(a)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var r=t[0],n=t[1],a=t[2],i=e[0],o=e[1],f=e[2];return Math.abs(r-i)<=M.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=M.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-f)<=M.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))};var M=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.sub=o,e.mul=f,e.div=u,e.dist=s,e.sqrDist=c,e.len=a,e.sqrLen=h,e.forEach=function(){var t=n();return function(e,r,n,a,i,o){var f=void 0,u=void 0;for(r||(r=3),n||(n=0),u=a?Math.min(a*r+n,e.length):e.length,f=n;f<u;f+=r)t[0]=e[f],t[1]=e[f+1],t[2]=e[f+2],i(t,t,o),e[f]=t[0],e[f+1]=t[1],e[f+2]=t[2];return e}}()},function(t,e,r){"use strict";function n(){var t=new l.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function i(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function o(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function f(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function u(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(r*r+n*n+a*a+i*i)}function s(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return r*r+n*n+a*a+i*i}function c(t){var e=t[0],r=t[1],n=t[2],a=t[3];return Math.sqrt(e*e+r*r+n*n+a*a)}function h(t){var e=t[0],r=t[1],n=t[2],a=t[3];return e*e+r*r+n*n+a*a}function d(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r*r+n*n+a*a+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=a*o,t[3]=i*o),t}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=n,e.clone=function(t){var e=new l.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,r,n){var a=new l.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},e.subtract=a,e.multiply=i,e.divide=o,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=f,e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},e.distance=u,e.squaredDistance=s,e.length=c,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=d,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,r,n){var a=e[0],i=e[1],o=e[2],f=e[3];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=o+n*(r[2]-o),t[3]=f+n*(r[3]-f),t},e.random=function(t,e){return e=e||1,t[0]=l.RANDOM(),t[1]=l.RANDOM(),t[2]=l.RANDOM(),t[3]=l.RANDOM(),d(t,t),f(t,t,e),t},e.transformMat4=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3];return t[0]=r[0]*n+r[4]*a+r[8]*i+r[12]*o,t[1]=r[1]*n+r[5]*a+r[9]*i+r[13]*o,t[2]=r[2]*n+r[6]*a+r[10]*i+r[14]*o,t[3]=r[3]*n+r[7]*a+r[11]*i+r[15]*o,t},e.transformQuat=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[0],f=r[1],u=r[2],s=r[3],c=s*n+f*i-u*a,h=s*a+u*n-o*i,d=s*i+o*a-f*n,l=-o*n-f*a-u*i;return t[0]=c*s+l*-o+h*-u-d*-f,t[1]=h*s+l*-f+d*-o-c*-u,t[2]=d*s+l*-u+c*-f-h*-o,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var r=t[0],n=t[1],a=t[2],i=t[3],o=e[0],f=e[1],u=e[2],s=e[3];return Math.abs(r-o)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-f)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(a-u)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-s)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))};var l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.sub=a,e.mul=i,e.div=o,e.dist=u,e.sqrDist=s,e.len=c,e.sqrLen=h,e.forEach=function(){var t=n();return function(e,r,n,a,i,o){var f=void 0,u=void 0;for(r||(r=4),n||(n=0),u=a?Math.min(a*r+n,e.length):e.length,f=n;f<u;f+=r)t[0]=e[f],t[1]=e[f+1],t[2]=e[f+2],t[3]=e[f+3],i(t,t,o),e[f]=t[0],e[f+1]=t[1],e[f+2]=t[2],e[f+3]=t[3];return e}}()},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var a=n(r(0)),i=n(r(5)),o=n(r(6)),f=n(r(1)),u=n(r(7)),s=n(r(8)),c=n(r(9)),h=n(r(2)),d=n(r(3));e.glMatrix=a,e.mat2=i,e.mat2d=o,e.mat3=f,e.mat4=u,e.quat=s,e.vec2=c,e.vec3=h,e.vec4=d},function(t,e,r){"use strict";function n(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],f=r[0],u=r[1],s=r[2],c=r[3];return t[0]=n*f+i*u,t[1]=a*f+o*u,t[2]=n*s+i*c,t[3]=a*s+o*c,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){var e=new i.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,r,n){var a=new i.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a},e.set=function(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t},e.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r*i-a*n;return o?(o=1/o,t[0]=i*o,t[1]=-n*o,t[2]=-a*o,t[3]=r*o,t):null},e.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=n,e.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],f=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*f,t[1]=a*u+o*f,t[2]=n*-f+i*u,t[3]=a*-f+o*u,t},e.scale=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],f=r[0],u=r[1];return t[0]=n*f,t[1]=a*f,t[2]=i*u,t[3]=o*u,t},e.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},e.subtract=a,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],f=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(r-f)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-u)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-c)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))},e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.mul=n,e.sub=a},function(t,e,r){"use strict";function n(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],f=e[4],u=e[5],s=r[0],c=r[1],h=r[2],d=r[3],l=r[4],M=r[5];return t[0]=n*s+i*c,t[1]=a*s+o*c,t[2]=n*h+i*d,t[3]=a*h+o*d,t[4]=n*l+i*M+f,t[5]=a*l+o*M+u,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new i.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){var e=new i.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,r,n,a,o){var f=new i.ARRAY_TYPE(6);return f[0]=t,f[1]=e,f[2]=r,f[3]=n,f[4]=a,f[5]=o,f},e.set=function(t,e,r,n,a,i,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t},e.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],f=e[5],u=r*i-n*a;return u?(u=1/u,t[0]=i*u,t[1]=-n*u,t[2]=-a*u,t[3]=r*u,t[4]=(a*f-i*o)*u,t[5]=(n*o-r*f)*u,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=n,e.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],f=e[4],u=e[5],s=Math.sin(r),c=Math.cos(r);return t[0]=n*c+i*s,t[1]=a*c+o*s,t[2]=n*-s+i*c,t[3]=a*-s+o*c,t[4]=f,t[5]=u,t},e.scale=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],f=e[4],u=e[5],s=r[0],c=r[1];return t[0]=n*s,t[1]=a*s,t[2]=i*c,t[3]=o*c,t[4]=f,t[5]=u,t},e.translate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],f=e[4],u=e[5],s=r[0],c=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=n*s+i*c+f,t[5]=a*s+o*c+u,t},e.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},e.subtract=a,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],f=t[4],u=t[5],s=e[0],c=e[1],h=e[2],d=e[3],l=e[4],M=e[5];return Math.abs(r-s)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-c)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-h)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-d)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(f-l)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(u-M)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.mul=n,e.sub=a},function(t,e,r){"use strict";function n(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],f=e[4],u=e[5],s=e[6],c=e[7],h=e[8],d=e[9],l=e[10],M=e[11],_=e[12],R=e[13],v=e[14],m=e[15],I=r[0],E=r[1],b=r[2],A=r[3];return t[0]=I*n+E*f+b*h+A*_,t[1]=I*a+E*u+b*d+A*R,t[2]=I*i+E*s+b*l+A*v,t[3]=I*o+E*c+b*M+A*m,I=r[4],E=r[5],b=r[6],A=r[7],t[4]=I*n+E*f+b*h+A*_,t[5]=I*a+E*u+b*d+A*R,t[6]=I*i+E*s+b*l+A*v,t[7]=I*o+E*c+b*M+A*m,I=r[8],E=r[9],b=r[10],A=r[11],t[8]=I*n+E*f+b*h+A*_,t[9]=I*a+E*u+b*d+A*R,t[10]=I*i+E*s+b*l+A*v,t[11]=I*o+E*c+b*M+A*m,I=r[12],E=r[13],b=r[14],A=r[15],t[12]=I*n+E*f+b*h+A*_,t[13]=I*a+E*u+b*d+A*R,t[14]=I*i+E*s+b*l+A*v,t[15]=I*o+E*c+b*M+A*m,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new i.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){var e=new i.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,r,n,a,o,f,u,s,c,h,d,l,M,_,R){var v=new i.ARRAY_TYPE(16);return v[0]=t,v[1]=e,v[2]=r,v[3]=n,v[4]=a,v[5]=o,v[6]=f,v[7]=u,v[8]=s,v[9]=c,v[10]=h,v[11]=d,v[12]=l,v[13]=M,v[14]=_,v[15]=R,v},e.set=function(t,e,r,n,a,i,o,f,u,s,c,h,d,l,M,_,R){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t[6]=f,t[7]=u,t[8]=s,t[9]=c,t[10]=h,t[11]=d,t[12]=l,t[13]=M,t[14]=_,t[15]=R,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],a=e[3],i=e[6],o=e[7],f=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[11]=e[14],t[12]=a,t[13]=o,t[14]=f}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],f=e[5],u=e[6],s=e[7],c=e[8],h=e[9],d=e[10],l=e[11],M=e[12],_=e[13],R=e[14],v=e[15],m=r*f-n*o,I=r*u-a*o,E=r*s-i*o,b=n*u-a*f,A=n*s-i*f,p=a*s-i*u,x=c*_-h*M,w=c*R-d*M,y=c*v-l*M,g=h*R-d*_,T=h*v-l*_,P=d*v-l*R,L=m*P-I*T+E*g+b*y-A*w+p*x;return L?(L=1/L,t[0]=(f*P-u*T+s*g)*L,t[1]=(a*T-n*P-i*g)*L,t[2]=(_*p-R*A+v*b)*L,t[3]=(d*A-h*p-l*b)*L,t[4]=(u*y-o*P-s*w)*L,t[5]=(r*P-a*y+i*w)*L,t[6]=(R*E-M*p-v*I)*L,t[7]=(c*p-d*E+l*I)*L,t[8]=(o*T-f*y+s*x)*L,t[9]=(n*y-r*T-i*x)*L,t[10]=(M*A-_*E+v*m)*L,t[11]=(h*E-c*A-l*m)*L,t[12]=(f*w-o*g-u*x)*L,t[13]=(r*g-n*w+a*x)*L,t[14]=(_*I-M*b-R*m)*L,t[15]=(c*b-h*I+d*m)*L,t):null},e.adjoint=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],f=e[5],u=e[6],s=e[7],c=e[8],h=e[9],d=e[10],l=e[11],M=e[12],_=e[13],R=e[14],v=e[15];return t[0]=f*(d*v-l*R)-h*(u*v-s*R)+_*(u*l-s*d),t[1]=-(n*(d*v-l*R)-h*(a*v-i*R)+_*(a*l-i*d)),t[2]=n*(u*v-s*R)-f*(a*v-i*R)+_*(a*s-i*u),t[3]=-(n*(u*l-s*d)-f*(a*l-i*d)+h*(a*s-i*u)),t[4]=-(o*(d*v-l*R)-c*(u*v-s*R)+M*(u*l-s*d)),t[5]=r*(d*v-l*R)-c*(a*v-i*R)+M*(a*l-i*d),t[6]=-(r*(u*v-s*R)-o*(a*v-i*R)+M*(a*s-i*u)),t[7]=r*(u*l-s*d)-o*(a*l-i*d)+c*(a*s-i*u),t[8]=o*(h*v-l*_)-c*(f*v-s*_)+M*(f*l-s*h),t[9]=-(r*(h*v-l*_)-c*(n*v-i*_)+M*(n*l-i*h)),t[10]=r*(f*v-s*_)-o*(n*v-i*_)+M*(n*s-i*f),t[11]=-(r*(f*l-s*h)-o*(n*l-i*h)+c*(n*s-i*f)),t[12]=-(o*(h*R-d*_)-c*(f*R-u*_)+M*(f*d-u*h)),t[13]=r*(h*R-d*_)-c*(n*R-a*_)+M*(n*d-a*h),t[14]=-(r*(f*R-u*_)-o*(n*R-a*_)+M*(n*u-a*f)),t[15]=r*(f*d-u*h)-o*(n*d-a*h)+c*(n*u-a*f),t},e.determinant=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],o=t[5],f=t[6],u=t[7],s=t[8],c=t[9],h=t[10],d=t[11],l=t[12],M=t[13],_=t[14],R=t[15];return(e*o-r*i)*(h*R-d*_)-(e*f-n*i)*(c*R-d*M)+(e*u-a*i)*(c*_-h*M)+(r*f-n*o)*(s*R-d*l)-(r*u-a*o)*(s*_-h*l)+(n*u-a*f)*(s*M-c*l)},e.multiply=n,e.translate=function(t,e,r){var n=r[0],a=r[1],i=r[2],o=void 0,f=void 0,u=void 0,s=void 0,c=void 0,h=void 0,d=void 0,l=void 0,M=void 0,_=void 0,R=void 0,v=void 0;return e===t?(t[12]=e[0]*n+e[4]*a+e[8]*i+e[12],t[13]=e[1]*n+e[5]*a+e[9]*i+e[13],t[14]=e[2]*n+e[6]*a+e[10]*i+e[14],t[15]=e[3]*n+e[7]*a+e[11]*i+e[15]):(o=e[0],f=e[1],u=e[2],s=e[3],c=e[4],h=e[5],d=e[6],l=e[7],M=e[8],_=e[9],R=e[10],v=e[11],t[0]=o,t[1]=f,t[2]=u,t[3]=s,t[4]=c,t[5]=h,t[6]=d,t[7]=l,t[8]=M,t[9]=_,t[10]=R,t[11]=v,t[12]=o*n+c*a+M*i+e[12],t[13]=f*n+h*a+_*i+e[13],t[14]=u*n+d*a+R*i+e[14],t[15]=s*n+l*a+v*i+e[15]),t},e.scale=function(t,e,r){var n=r[0],a=r[1],i=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,r,n){var a=n[0],o=n[1],f=n[2],u=Math.sqrt(a*a+o*o+f*f),s=void 0,c=void 0,h=void 0,d=void 0,l=void 0,M=void 0,_=void 0,R=void 0,v=void 0,m=void 0,I=void 0,E=void 0,b=void 0,A=void 0,p=void 0,x=void 0,w=void 0,y=void 0,g=void 0,T=void 0,P=void 0,L=void 0,U=void 0,S=void 0;return Math.abs(u)<i.EPSILON?null:(u=1/u,a*=u,o*=u,f*=u,s=Math.sin(r),c=Math.cos(r),h=1-c,d=e[0],l=e[1],M=e[2],_=e[3],R=e[4],v=e[5],m=e[6],I=e[7],E=e[8],b=e[9],A=e[10],p=e[11],x=a*a*h+c,w=o*a*h+f*s,y=f*a*h-o*s,g=a*o*h-f*s,T=o*o*h+c,P=f*o*h+a*s,L=a*f*h+o*s,U=o*f*h-a*s,S=f*f*h+c,t[0]=d*x+R*w+E*y,t[1]=l*x+v*w+b*y,t[2]=M*x+m*w+A*y,t[3]=_*x+I*w+p*y,t[4]=d*g+R*T+E*P,t[5]=l*g+v*T+b*P,t[6]=M*g+m*T+A*P,t[7]=_*g+I*T+p*P,t[8]=d*L+R*U+E*S,t[9]=l*L+v*U+b*S,t[10]=M*L+m*U+A*S,t[11]=_*L+I*U+p*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[4],o=e[5],f=e[6],u=e[7],s=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+s*n,t[5]=o*a+c*n,t[6]=f*a+h*n,t[7]=u*a+d*n,t[8]=s*a-i*n,t[9]=c*a-o*n,t[10]=h*a-f*n,t[11]=d*a-u*n,t},e.rotateY=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[0],o=e[1],f=e[2],u=e[3],s=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-s*n,t[1]=o*a-c*n,t[2]=f*a-h*n,t[3]=u*a-d*n,t[8]=i*n+s*a,t[9]=o*n+c*a,t[10]=f*n+h*a,t[11]=u*n+d*a,t},e.rotateZ=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[0],o=e[1],f=e[2],u=e[3],s=e[4],c=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+s*n,t[1]=o*a+c*n,t[2]=f*a+h*n,t[3]=u*a+d*n,t[4]=s*a-i*n,t[5]=c*a-o*n,t[6]=h*a-f*n,t[7]=d*a-u*n,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,r){var n=r[0],a=r[1],o=r[2],f=Math.sqrt(n*n+a*a+o*o),u=void 0,s=void 0,c=void 0;return Math.abs(f)<i.EPSILON?null:(f=1/f,n*=f,a*=f,o*=f,u=Math.sin(e),s=Math.cos(e),c=1-s,t[0]=n*n*c+s,t[1]=a*n*c+o*u,t[2]=o*n*c-a*u,t[3]=0,t[4]=n*a*c-o*u,t[5]=a*a*c+s,t[6]=o*a*c+n*u,t[7]=0,t[8]=n*o*c+a*u,t[9]=a*o*c-n*u,t[10]=o*o*c+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],f=n+n,u=a+a,s=i+i,c=n*f,h=n*u,d=n*s,l=a*u,M=a*s,_=i*s,R=o*f,v=o*u,m=o*s;return t[0]=1-(l+_),t[1]=h+m,t[2]=d-v,t[3]=0,t[4]=h-m,t[5]=1-(c+_),t[6]=M+R,t[7]=0,t[8]=d+v,t[9]=M-R,t[10]=1-(c+l),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[4],o=e[5],f=e[6],u=e[8],s=e[9],c=e[10];return t[0]=Math.sqrt(r*r+n*n+a*a),t[1]=Math.sqrt(i*i+o*o+f*f),t[2]=Math.sqrt(u*u+s*s+c*c),t},e.getRotation=function(t,e){var r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},e.fromRotationTranslationScale=function(t,e,r,n){var a=e[0],i=e[1],o=e[2],f=e[3],u=a+a,s=i+i,c=o+o,h=a*u,d=a*s,l=a*c,M=i*s,_=i*c,R=o*c,v=f*u,m=f*s,I=f*c,E=n[0],b=n[1],A=n[2];return t[0]=(1-(M+R))*E,t[1]=(d+I)*E,t[2]=(l-m)*E,t[3]=0,t[4]=(d-I)*b,t[5]=(1-(h+R))*b,t[6]=(_+v)*b,t[7]=0,t[8]=(l+m)*A,t[9]=(_-v)*A,t[10]=(1-(h+M))*A,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,r,n,a){var i=e[0],o=e[1],f=e[2],u=e[3],s=i+i,c=o+o,h=f+f,d=i*s,l=i*c,M=i*h,_=o*c,R=o*h,v=f*h,m=u*s,I=u*c,E=u*h,b=n[0],A=n[1],p=n[2],x=a[0],w=a[1],y=a[2];return t[0]=(1-(_+v))*b,t[1]=(l+E)*b,t[2]=(M-I)*b,t[3]=0,t[4]=(l-E)*A,t[5]=(1-(d+v))*A,t[6]=(R+m)*A,t[7]=0,t[8]=(M+I)*p,t[9]=(R-m)*p,t[10]=(1-(d+_))*p,t[11]=0,t[12]=r[0]+x-(t[0]*x+t[4]*w+t[8]*y),t[13]=r[1]+w-(t[1]*x+t[5]*w+t[9]*y),t[14]=r[2]+y-(t[2]*x+t[6]*w+t[10]*y),t[15]=1,t},e.fromQuat=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r+r,f=n+n,u=a+a,s=r*o,c=n*o,h=n*f,d=a*o,l=a*f,M=a*u,_=i*o,R=i*f,v=i*u;return t[0]=1-h-M,t[1]=c+v,t[2]=d-R,t[3]=0,t[4]=c-v,t[5]=1-s-M,t[6]=l+_,t[7]=0,t[8]=d+R,t[9]=l-_,t[10]=1-s-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,r,n,a,i,o){var f=1/(r-e),u=1/(a-n),s=1/(i-o);return t[0]=2*i*f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(r+e)*f,t[9]=(a+n)*u,t[10]=(o+i)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*s,t[15]=0,t},e.perspective=function(t,e,r,n,a){var i=1/Math.tan(e/2),o=1/(n-a);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+n)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*n*o,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,r,n){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),f=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+f),s=2/(a+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(o-f)*u*.5,t[9]=(a-i)*s*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},e.ortho=function(t,e,r,n,a,i,o){var f=1/(e-r),u=1/(n-a),s=1/(i-o);return t[0]=-2*f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+r)*f,t[13]=(a+n)*u,t[14]=(o+i)*s,t[15]=1,t},e.lookAt=function(t,e,r,n){var a=void 0,o=void 0,f=void 0,u=void 0,s=void 0,c=void 0,h=void 0,d=void 0,l=void 0,M=void 0,_=e[0],R=e[1],v=e[2],m=n[0],I=n[1],E=n[2],b=r[0],A=r[1],p=r[2];return Math.abs(_-b)<i.EPSILON&&Math.abs(R-A)<i.EPSILON&&Math.abs(v-p)<i.EPSILON?mat4.identity(t):(h=_-b,d=R-A,l=v-p,M=1/Math.sqrt(h*h+d*d+l*l),h*=M,d*=M,l*=M,a=I*l-E*d,o=E*h-m*l,f=m*d-I*h,(M=Math.sqrt(a*a+o*o+f*f))?(M=1/M,a*=M,o*=M,f*=M):(a=0,o=0,f=0),u=d*f-l*o,s=l*a-h*f,c=h*o-d*a,(M=Math.sqrt(u*u+s*s+c*c))?(M=1/M,u*=M,s*=M,c*=M):(u=0,s=0,c=0),t[0]=a,t[1]=u,t[2]=h,t[3]=0,t[4]=o,t[5]=s,t[6]=d,t[7]=0,t[8]=f,t[9]=c,t[10]=l,t[11]=0,t[12]=-(a*_+o*R+f*v),t[13]=-(u*_+s*R+c*v),t[14]=-(h*_+d*R+l*v),t[15]=1,t)},e.targetTo=function(t,e,r,n){var a=e[0],i=e[1],o=e[2],f=n[0],u=n[1],s=n[2],c=a-r[0],h=i-r[1],d=o-r[2],l=c*c+h*h+d*d;l>0&&(l=1/Math.sqrt(l),c*=l,h*=l,d*=l);var M=u*d-s*h,_=s*c-f*d,R=f*h-u*c;return t[0]=M,t[1]=_,t[2]=R,t[3]=0,t[4]=h*R-d*_,t[5]=d*M-c*R,t[6]=c*_-h*M,t[7]=0,t[8]=c,t[9]=h,t[10]=d,t[11]=0,t[12]=a,t[13]=i,t[14]=o,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},e.subtract=a,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],f=t[4],u=t[5],s=t[6],c=t[7],h=t[8],d=t[9],l=t[10],M=t[11],_=t[12],R=t[13],v=t[14],m=t[15],I=e[0],E=e[1],b=e[2],A=e[3],p=e[4],x=e[5],w=e[6],y=e[7],g=e[8],T=e[9],P=e[10],L=e[11],U=e[12],S=e[13],D=e[14],O=e[15];return Math.abs(r-I)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(I))&&Math.abs(n-E)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(a-b)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(o-A)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(f-p)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(u-x)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(s-w)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(c-y)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(h-g)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(d-T)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(l-P)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(M-L)<=i.EPSILON*Math.max(1,Math.abs(M),Math.abs(L))&&Math.abs(_-U)<=i.EPSILON*Math.max(1,Math.abs(_),Math.abs(U))&&Math.abs(R-S)<=i.EPSILON*Math.max(1,Math.abs(R),Math.abs(S))&&Math.abs(v-D)<=i.EPSILON*Math.max(1,Math.abs(v),Math.abs(D))&&Math.abs(m-O)<=i.EPSILON*Math.max(1,Math.abs(m),Math.abs(O))};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.mul=n,e.sub=a},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function a(){var t=new s.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function i(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function o(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],f=r[0],u=r[1],s=r[2],c=r[3];return t[0]=n*c+o*f+a*s-i*u,t[1]=a*c+o*u+i*f-n*s,t[2]=i*c+o*s+n*u-a*f,t[3]=o*c-n*f-a*u-i*s,t}function f(t,e,r,n){var a=e[0],i=e[1],o=e[2],f=e[3],u=r[0],s=r[1],c=r[2],h=r[3],d=void 0,l=void 0,M=void 0,_=void 0,R=void 0;return(l=a*u+i*s+o*c+f*h)<0&&(l=-l,u=-u,s=-s,c=-c,h=-h),1-l>1e-6?(d=Math.acos(l),M=Math.sin(d),_=Math.sin((1-n)*d)/M,R=Math.sin(n*d)/M):(_=1-n,R=n),t[0]=_*a+R*u,t[1]=_*i+R*s,t[2]=_*o+R*c,t[3]=_*f+R*h,t}function u(t,e){var r=e[0]+e[4]+e[8],n=void 0;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*i+i]-e[3*o+o]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*i+o]-e[3*o+i])*n,t[i]=(e[3*i+a]+e[3*a+i])*n,t[o]=(e[3*o+a]+e[3*a+o])*n}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=a,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=i,e.getAxisAngle=function(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},e.multiply=o,e.rotateX=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],f=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*f,t[1]=a*u+i*f,t[2]=i*u-a*f,t[3]=o*u-n*f,t},e.rotateY=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],f=Math.sin(r),u=Math.cos(r);return t[0]=n*u-i*f,t[1]=a*u+o*f,t[2]=i*u+n*f,t[3]=o*u-a*f,t},e.rotateZ=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],f=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*f,t[1]=a*u-n*f,t[2]=i*u+o*f,t[3]=o*u-i*f,t},e.calculateW=function(t,e){var r=e[0],n=e[1],a=e[2];return t[0]=r,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),t},e.slerp=f,e.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r*r+n*n+a*a+i*i,f=o?1/o:0;return t[0]=-r*f,t[1]=-n*f,t[2]=-a*f,t[3]=i*f,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=u,e.fromEuler=function(t,e,r,n){var a=.5*Math.PI/180;e*=a,r*=a,n*=a;var i=Math.sin(e),o=Math.cos(e),f=Math.sin(r),u=Math.cos(r),s=Math.sin(n),c=Math.cos(n);return t[0]=i*u*c-o*f*s,t[1]=o*f*c+i*u*s,t[2]=o*u*s-i*f*c,t[3]=o*u*c+i*f*s,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var s=n(r(0)),c=n(r(1)),h=n(r(2)),d=n(r(3)),l=(e.clone=d.clone,e.fromValues=d.fromValues,e.copy=d.copy,e.set=d.set,e.add=d.add,e.mul=o,e.scale=d.scale,e.dot=d.dot,e.lerp=d.lerp,e.length=d.length),M=(e.len=l,e.squaredLength=d.squaredLength),_=(e.sqrLen=M,e.normalize=d.normalize);e.exactEquals=d.exactEquals,e.equals=d.equals,e.rotationTo=function(){var t=h.create(),e=h.fromValues(1,0,0),r=h.fromValues(0,1,0);return function(n,a,o){var f=h.dot(a,o);return f<-.999999?(h.cross(t,e,a),h.len(t)<1e-6&&h.cross(t,r,a),h.normalize(t,t),i(n,t,Math.PI),n):f>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(h.cross(t,a,o),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+f,_(n,n))}}(),e.sqlerp=function(){var t=a(),e=a();return function(r,n,a,i,o,u){return f(t,n,o,u),f(e,a,i,u),f(r,t,e,2*u*(1-u)),r}}(),e.setAxes=function(){var t=c.create();return function(e,r,n,a){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],_(e,u(e,t))}}()},function(t,e,r){"use strict";function n(){var t=new h.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function i(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function o(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function f(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function u(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function s(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function c(t){var e=t[0],r=t[1];return e*e+r*r}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=n,e.clone=function(t){var e=new h.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var r=new h.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,r){return t[0]=e,t[1]=r,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},e.subtract=a,e.multiply=i,e.divide=o,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},e.distance=f,e.squaredDistance=u,e.length=s,e.squaredLength=c,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var r=e[0],n=e[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},e.lerp=function(t,e,r,n){var a=e[0],i=e[1];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t},e.random=function(t,e){e=e||1;var r=2*h.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},e.transformMat2=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a,t[1]=r[1]*n+r[3]*a,t},e.transformMat2d=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a+r[4],t[1]=r[1]*n+r[3]*a+r[5],t},e.transformMat3=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[3]*a+r[6],t[1]=r[1]*n+r[4]*a+r[7],t},e.transformMat4=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[4]*a+r[12],t[1]=r[1]*n+r[5]*a+r[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var r=t[0],n=t[1],a=e[0],i=e[1];return Math.abs(r-a)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-i)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))};var h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.len=s,e.sub=a,e.mul=i,e.div=o,e.dist=f,e.sqrDist=u,e.sqrLen=c,e.forEach=function(){var t=n();return function(e,r,n,a,i,o){var f=void 0,u=void 0;for(r||(r=2),n||(n=0),u=a?Math.min(a*r+n,e.length):e.length,f=n;f<u;f+=r)t[0]=e[f],t[1]=e[f+1],i(t,t,o),e[f]=t[0],e[f+1]=t[1];return e}}()}])});var RedShaderInfo;!function(){var t,e,r,n;(RedShaderInfo=function(a,i,o,f){if(!(this instanceof RedShaderInfo))return new RedShaderInfo(a,i,o,f);if(!(a instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if("string"!=typeof i)throw"key - 문자열만 허용됩니다.";if("string"!=typeof o)throw"type - 문자열만 허용됩니다.";if("string"!=typeof f)throw"source - 문자열만 허용됩니다.";if(a.__datas.shaderInfo||(a.__datas.shaderInfo={},a.__datas.shaderInfo[RedShaderInfo.FRAGMENT_SHADER]={},a.__datas.shaderInfo[RedShaderInfo.VERTEX_SHADER]={}),(n=a.__datas.shaderInfo)[o][i])throw i+"는 "+o+"정보에 이미 존재하는 RedShaderInfo 입니다.";switch(e=a.gl,o){case RedShaderInfo.VERTEX_SHADER:r=e.createShader(e.VERTEX_SHADER);break;case RedShaderInfo.FRAGMENT_SHADER:r=e.createShader(e.FRAGMENT_SHADER);break;default:throw"쉐이더 타입을 확인하세요!"}if(e.shaderSource(r,f),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw"쉐이더 컴파일에 실패하였습니다.";(t=f.match(/.attribute[\s\S]+?\;|.uniform[\s\S]+?\;/g)).forEach(function(e,r){t[r]=e.trim().replace(";","").split("[")[0]}),this.key=i,this.type=o,this.shader=r,this.parseData=t,this.__UUID=REDGL_UUID++,n[o][i]=this,Object.freeze(this)}).FRAGMENT_SHADER="fragmentShader",RedShaderInfo.VERTEX_SHADER="vertexShader",Object.freeze(RedShaderInfo)}();var RedProgramInfo;!function(){var t,e,r,n,a,i;i=[],RedProgramInfo=function(o,f,u,s,c){if(!(this instanceof RedProgramInfo))return new RedProgramInfo(o,f,u,s,c);if(!(o instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if("string"!=typeof f)throw"key - 문자열만 허용됩니다.";if(!c)throw"makeUniformValue - 반드시 정의해야합니다.";if(!u instanceof RedShaderInfo)throw"vShaderInfo - RedShaderInfo만 허용됩니다.";if(!s instanceof RedShaderInfo)throw"fShaderInfo - RedShaderInfo만 허용됩니다.";if(o.__datas.RedProgramInfo||(o.__datas.RedProgramInfo={}),(e=o.__datas.RedProgramInfo)[f])return e[f];if(t=o.gl,this.key=f,this.attributes={},this.uniforms={},a=this,r=t.createProgram(),t.attachShader(r,u.shader),t.attachShader(r,s.shader),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw"프로그램을 초기화 할 수 없습니다."+t.useProgram(r);n={},i.length=0,i.push(u,s),i.forEach(function(e){e.parseData&&e.parseData.forEach(function(e){var n;n={},"attribute"==(e=e.split(" "))[0]?(n.location=t.getAttribLocation(r,e[2]),a.attributes[e[2]]=n):(n.location=t.getUniformLocation(r,e[2]),a.uniforms[e[2]]=n)})}),this.program=r,this.shaderInfos={vShaderInfo:u,fShaderInfo:s},this.__UUID=REDGL_UUID++,this.makeUniformValue=c,e[f]=this,Object.freeze(this)},Object.freeze(RedProgramInfo)}();var RedBaseCamera;!function(){var t;RedBaseCamera=function(e,r){if(!(this instanceof RedBaseCamera))return new RedBaseCamera(e,r);if(!(e instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if("string"!=typeof r)throw"key는 문자열만 허용됩니다.";if(e.__datas.RedBaseCamera||(e.__datas.RedBaseCamera={}),(t=e.__datas.RedBaseCamera)[r])throw r+"는 이미 존재하는 RedBaseCamera 입니다.";Object.defineProperty(this,"uPMatrix",{value:mat4.create(),enumerable:!0}),Object.defineProperty(this,"uCameraMatrix",{value:mat4.create(),enumerable:!0}),this.fov=45,this.aspect=.1,this.near=.1,this.far=1e3,Object.defineProperty(this,"__desiredCoords",{value:new Float32Array([0,0,0]),enumerable:!0}),Object.defineProperty(this,"__desiredRotation",{value:new Float32Array([0,0,0]),enumerable:!0}),this.__UUID=REDGL_UUID++,this.__canvas=e.__canvas,this.update(),t[r]=this};mat4.create();RedBaseCamera.prototype={setPosition:function(t,e,r){return this.__desiredCoords[0]=t,this.__desiredCoords[1]=e,this.__desiredCoords[2]=r,this},moveForward:function(t){},moveBack:function(t){},moveLeft:function(t){},moveRight:function(t){},moveUp:function(t){},moveDown:function(t){},lookAt:function(){var t=new Float32Array([0,1,0]);return function(e){mat4.lookAt(this.uCameraMatrix,this.__desiredCoords,e,t)}}(),identity:function(){mat4.identity(this.uCameraMatrix)},update:function(){return this.aspect=this.__canvas.clientWidth/this.__canvas.clientHeight,mat4.identity(this.uPMatrix),mat4.perspective(this.uPMatrix,this.fov*Math.PI/180,this.aspect,this.near,this.far),this}},Object.freeze(RedBaseCamera)}();var RedCubeTextureInfo;!function(){var t;(RedCubeTextureInfo=function(e,r){if(!(this instanceof RedCubeTextureInfo))return new RedCubeTextureInfo(e,r);if(!(e instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if(!(r instanceof Array))throw"srcList는 Array만 허용됩니다.";var n,a;a=this,t=e.gl,n=0;var i=r.length;for(this.__imgList=[];i--;){var o=new Image;o.src=r[i],o.onload=function(){n++,this.onload=null,6==n&&a.__allLoaed(t)},this.__imgList[i]=o}this.__targetIndex=0,this.loaded=0,this.actived=0,this.__webglCubeTexture=1,this.__UUID=REDGL_UUID++,t.activeTexture(t.TEXTURE0),this.texture=t.createTexture()}).prototype.__allLoaed=function(){this.loaded=1,this.__targetIndex=2,t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_CUBE_MAP,this.texture),this.__imgList.forEach(function(e,r){t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)}),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.generateMipmap(t.TEXTURE_CUBE_MAP)}}();var RedBufferInfo;!function(){var t,e,r,n;(RedBufferInfo=function(a,i,o,f,u,s,c,h,d,l,M,_){if(!(this instanceof RedBufferInfo))return new RedBufferInfo(a,i,o,f,u,s,c,h,d,l,M,_);if(!(a instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if("string"!=typeof i)throw"bufferType - 문자열만 허용됩니다.";if("string"!=typeof o)throw"key - 문자열만 허용됩니다.";if(i==RedBufferInfo.ARRAY_BUFFER&&"string"!=typeof f)throw"pointer - 문자열만 허용됩니다.";if("number"!=typeof s||s!=parseInt(s))throw"pointSize - Integer만 허용됩니다.";if(a.__datas.RedBufferInfo||(a.__datas.RedBufferInfo={}),(e=a.__datas.RedBufferInfo)[o])throw o+"는 이미 존재하는 RedBufferInfo 입니다.";switch(t=a.gl,n=t.createBuffer(),r=i,i){case RedBufferInfo.ARRAY_BUFFER:if(i=t.ARRAY_BUFFER,!(u instanceof Float32Array||u instanceof Float64Array))throw"TypedArray형식을 사용해야합니다.";break;case RedBufferInfo.ELEMENT_ARRAY_BUFFER:if(i=t.ELEMENT_ARRAY_BUFFER,!(u instanceof Uint8Array||u instanceof Uint16Array||u instanceof Uint32Array||u instanceof Int8Array||u instanceof Int16Array||u instanceof Int32Array))throw"TypedArray형식을 사용해야합니다.";break;default:throw"지원하지 않는 버퍼타입입니다. "}if(t.bindBuffer(i,n),t.bufferData(i,u,_=_||t.STATIC_DRAW),this.shaderPointerKey=f,!h)throw"버퍼데이터의 형식을 지정해주세요";var R=!1;if(u instanceof Int8Array?R=h==t.BYTE:u instanceof Uint8Array?R=h==t.UNSIGNED_BYTE:u instanceof Int16Array?R=h==t.SHORT:u instanceof Uint16Array?R=h==t.UNSIGNED_SHORT:u instanceof Int32Array?R=h==t.INT:u instanceof Uint32Array?R=h==t.UNSIGNED_INT:u instanceof Float32Array&&(R=h==t.FLOAT),!R)throw"arrayData 형식과 arrayType이 맞지않습니다.";if(this.arrayType=h,!s)throw"pointSize를 입력하세요";if(this.pointSize=s,"number"!=typeof(c=c||u.length/s)||c!=parseInt(c))throw"pointNum - Integer만 허용됩니다.";if(this.pointNum=c,this.normalize=d||!1,"number"!=typeof(l=l||0)||l!=parseInt(l))throw"stride - Integer만 허용됩니다.";if("number"!=typeof(M=M||0)||M!=parseInt(M))throw"offset - Integer만 허용됩니다.";this.stride=l,this.offset=M,this.enabled=0,this.key=o,this.bufferType=r,this.buffer=n,this.drawMode=_,this.__UUID=REDGL_UUID++,e[o]=this}).ARRAY_BUFFER="arrayBuffer",RedBufferInfo.ELEMENT_ARRAY_BUFFER="elementArrayBuffer",Object.freeze(RedBufferInfo)}();var RedDirectionalLightInfo;!function(){var t;(RedDirectionalLightInfo=function(e){if(!(this instanceof RedDirectionalLightInfo))return new RedDirectionalLightInfo(e);if(!(e instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";e.__datas.RedDirectionalLightInfo||(e.__datas.RedDirectionalLightInfo={}),t=e.__datas.RedDirectionalLightInfo,this.type=RedDirectionalLightInfo.TYPE,this.color=new Float32Array([255,255,255,255]),this.direction=new Float32Array([0,0,0])}).TYPE="directional",Object.freeze(RedDirectionalLightInfo)}();var RedFixedAttributeKey;RedFixedAttributeKey={aVertexPosition:"aVertexPosition",aTexcoord:"aTexcoord",aVertexNormal:"aVertexNormal"},Object.freeze(RedFixedAttributeKey);var RedGeometryInfo;!function(){var t,e,r;RedGeometryInfo=function(n,a,i,o,f,u){if(!(this instanceof RedGeometryInfo))return new RedGeometryInfo(n,a,i,o,f,u);if(!(n instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if(i&&!(i instanceof RedBufferInfo))throw"verticesBufferInfo는 RedBufferInfo만 가능합니다.";if(o&&!(o instanceof RedBufferInfo))throw"indicesBufferInfo RedBufferInfo만 가능합니다.";if(f&&!(f instanceof RedBufferInfo))throw"texcoordBufferInfo RedBufferInfo만 가능합니다.";if(u&&!(u instanceof RedBufferInfo))throw"normalBufferInfo RedBufferInfo만 가능합니다.";if(i&&i.bufferType!=RedBufferInfo.ARRAY_BUFFER)throw"verticesBufferInfo ARRAY_BUFFER 가능합니다.";if(o&&o.bufferType!=RedBufferInfo.ELEMENT_ARRAY_BUFFER)throw"indicesBufferInfo는 ELEMENT_ARRAY_BUFFER만 가능합니다.";if(f&&f.bufferType!=RedBufferInfo.ARRAY_BUFFER)throw"texcoordBufferInfo ARRAY_BUFFER 가능합니다.";if(u&&u.bufferType!=RedBufferInfo.ARRAY_BUFFER)throw"normalBufferInfo ARRAY_BUFFER 가능합니다.";if(n.__datas.RedGeometryInfo||(n.__datas.RedGeometryInfo={}),(e=n.__datas.RedGeometryInfo)[a])throw a+"는 이미 존재하는 RedGeometryInfo 입니다.";if(t=n.gl,this.attributes={},this.indices=null,this.key=a,i){if(i.shaderPointerKey!=RedFixedAttributeKey.aVertexPosition)throw"verticesBufferInfo의 shaderPointerKey는 aVertexPosition만 가질수있습니다.";this.attributes.vertexPosition=i}if(f){if(f.shaderPointerKey!=RedFixedAttributeKey.aTexcoord)throw"texcoordBufferInfo의 shaderPointerKey는 aTexcoord만 가질수있습니다.";this.attributes.texcoord=f}if(u){if(u.shaderPointerKey!=RedFixedAttributeKey.aVertexNormal)throw"normalBufferInfo의 shaderPointerKey는 aVertexNormal만 가질수있습니다.";this.attributes.normal=u}this.__attributeList=[];for(r in this.attributes)this.__attributeList.push(this.attributes[r]);this.indices=o,this.__UUID=REDGL_UUID++,e[a]=this},Object.freeze(RedGeometryInfo)}();var RedMeshInfo;!function(){var t,e;RedMeshInfo=function(r,n,a,i){if(!(this instanceof RedMeshInfo))return new RedMeshInfo(r,n,a,i);if(!(r instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if("string"!=typeof n)throw"key - 문자열만 허용됩니다.";if(!(a instanceof RedGeometryInfo))throw"geometryInfo - RedGeometryInfo만 허용됩니다.";if(!(i instanceof RedMaterialInfo))throw"materialInfo - RedMaterialInfo만 허용됩니다.";if(t=r.gl,r.__datas.RedMeshInfo||(r.__datas.RedMeshInfo={}),(e=r.__datas.RedMeshInfo)[n])throw n+"는 이미 존재하는 RedMeshInfo 입니다.";RedMeshBaseInfo.call(this,r),this.geometryInfo=a,this.materialInfo=i,e[n]=this},Object.freeze(RedMeshInfo)}();var RedMeshBaseInfo;!function(){var t;RedMeshBaseInfo=function(e){t=e.gl,Object.defineProperty(this,"uMVMatrix",{value:mat4.create(),enumerable:!0}),Object.defineProperty(this,"uNMatrix",{value:mat4.create(),enumerable:!0}),Object.defineProperty(this,"position",{value:new Float32Array([0,0,0]),enumerable:!0}),Object.defineProperty(this,"rotation",{value:new Float32Array([0,0,0]),enumerable:!0}),Object.defineProperty(this,"scale",{value:new Float32Array([1,1,1]),enumerable:!0}),this.geometryInfo=null,this.materialInfo=null,this.drawMode=t.TRIANGLES,this.useCullFace=!0,this.cullFace=t.BACK,this.useBlendMode=!0,this.blendFactor1=t.ONE,this.blendFactor2=t.ONE_MINUS_SRC_ALPHA,this.useDepthTest=!0,this.depthTestFunc=t.LESS,this.children=[],this.__UUID=REDGL_UUID++},Object.freeze(RedMeshBaseInfo)}();var RedPrimitive;!function(){var t,e,r,n;n=function(t){return t.__datas.RedPrimitive||(t.__datas.RedPrimitive={}),t.__datas.RedPrimitive},r=function(t,e,r,n,a,i){return r=new Float32Array(r),n=new Uint16Array(n),a=new Float32Array(a),i=new Float32Array(i),r=t.createArrayBufferInfo(e+"_vertices",RedFixedAttributeKey.aVertexPosition,r,3,r.length/3,t.gl.FLOAT),n=t.createIndexBufferInfo(e+"_indices",n,1,n.length,t.gl.UNSIGNED_SHORT),a&&(a=t.createArrayBufferInfo(e+"_uvs",RedFixedAttributeKey.aTexcoord,a,2,a.length/2,t.gl.FLOAT)),i&&(i=t.createArrayBufferInfo(e+"_normals",RedFixedAttributeKey.aVertexNormal,i,3,i.length/3,t.gl.FLOAT)),t.createGeometryInfo(e,r,n,a,i)},(RedPrimitive={}).plane=function(){var a,i,o,f,u,s,c,h,d,l,M,_,R,v,m,I;return function E(b,A,p,x,w){if(!(this instanceof E))return new E(b,A,p,x,w);if(!(b instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if(A=A||1,p=p||1,w=w||1,w=w||1,a=A/2,i=p/2,o=Math.floor(x)||1,f=Math.floor(w)||1,u=o+1,s=f+1,c=A/o,h=p/f,e=n(b),t="RedPrimitivePlane_"+A+"_"+p+"_"+x+"_"+w,e[t])return e[t];var y=[],g=[],T=[],P=[];for(l=0;l<s;l++)for(_=l*h-i,d=0;d<u;d++)M=d*c-a,y.push(M,-_,0),P.push(0,0,1),T.push(d/o,1-l/f);for(l=0;l<f;l++)for(d=0;d<o;d++)R=d+u*l,v=d+u*(l+1),m=d+1+u*(l+1),I=d+1+u*l,g.push(R,v,I,v,m,I);return e[t]=r(b,t,y,g,T,P),e[t]}}(),RedPrimitive.cube=function(){var a,i,o;return o=function(t,e,r,n,o,f,u,s,c,h,d,l,M,_,R){var v,m,I=h/M,E=d/_,b=h/2,A=d/2,p=l/2,x=M+1,w=_+1,y=0,g=0,T=[];for(m=0;m<w;m++){var P=m*E-A;for(v=0;v<x;v++){var L=v*I-b;T[o]=L*s,T[f]=P*c,T[u]=p,t.push(T.x,T.y,T.z),T[o]=0,T[f]=0,T[u]=l>0?1:-1,n.push(T.x,T.y,T.z),r.push(v/M),r.push(1-m/_),y+=1}}for(m=0;m<_;m++)for(v=0;v<M;v++){var U=a+v+x*m,S=a+v+x*(m+1),D=a+(v+1)+x*(m+1),O=a+(v+1)+x*m;e.push(U,S,O),e.push(S,D,O),g+=6}i+=g,a+=y},function f(u,s,c,h,d,l,M){if(!(this instanceof f))return new f(u,s,c,h,d,l,M);if(!(u instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if(s=s||1,c=c||1,h=h||1,d=Math.floor(d)||1,l=Math.floor(l)||1,M=Math.floor(M)||1,e=n(u),t="RedPrimitiveCube_"+s+"_"+c+"_"+h+"_"+d+"_"+l+"_"+M,e[t])return e[t];var _=[],R=[],v=[],m=[];return a=0,i=0,o(_,R,v,m,"z","y","x",-1,-1,h,c,s,M,l),o(_,R,v,m,"z","y","x",1,-1,h,c,-s,M,l),o(_,R,v,m,"x","z","y",1,1,s,h,c,d,M),o(_,R,v,m,"x","z","y",1,-1,s,h,-c,d,M),o(_,R,v,m,"x","y","z",1,-1,s,c,h,d,l),o(_,R,v,m,"x","y","z",-1,-1,s,c,-h,d,l),e[t]=r(u,t,_,R,v,m),e[t]}}(),RedPrimitive.grid=function(){var a,i,o,f,u,s,c,h;return function d(l,M,_){if(!(this instanceof d))return new d(l,M,_);if(!(l instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if(e=n(l),M=M||50,_=_||50,t="RedPrimitiveFloor_"+M+"_"+_,e[t])return e[t];var R=[],v=[];for(o=2*(a=M)/(i=_),f=0;f<=i;f++)u=f*o,h=6*(s=i+1),R[c=6*f]=-a,R[c+1]=0,R[c+2]=-a+u,R[c+3]=a,R[c+4]=0,R[c+5]=-a+u,R[h+c]=-a+u,R[h+c+1]=0,R[h+c+2]=-a,R[h+c+3]=-a+u,R[h+c+4]=0,R[h+c+5]=a,v[2*f]=2*f,v[2*f+1]=2*f+1,v[2*s+2*f]=2*s+2*f,v[2*s+2*f+1]=2*s+2*f+1;return e[t]=r(l,t,R,v),e[t]}}(),RedPrimitive.sphere=function(){var a,i,o,f,u,s,c,h,d=[],l=new Float32Array([0,0,0]),M=new Float32Array([0,0,0]);return function _(R,v,m,I,E,b,A,p){if(!(this instanceof _))return new _(R,v,m,I,E,b,A,p);if(!(R instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if(v=v||1,m=Math.max(3,Math.floor(m)||8),I=Math.max(2,Math.floor(I)||6),E=void 0!==E?E:0,b=void 0!==b?b:2*Math.PI,A=void 0!==A?A:0,p=void 0!==p?p:Math.PI,a=A+p,f=0,d.length=0,l[0]=0,l[1]=0,l[2]=0,M[0]=0,M[1]=0,M[2]=0,e=n(R),t="RedPrimitiveSphere_"+v+"_"+m+"_"+I+"_"+E+"_"+b+"_"+A+"_"+p,e[t])return e[t];var x=[],w=[],y=[],g=[];for(o=0;o<=I;o++){var T=[],P=o/I;for(i=0;i<=m;i++){var L=i/m;l.x=-v*Math.cos(E+L*b)*Math.sin(A+P*p),l.y=v*Math.cos(A+P*p),l.z=v*Math.sin(E+L*b)*Math.sin(A+P*p),x.push(l.x,l.y,l.z),M[0]=l.x,M[1]=l.y,M[2]=l.z,vec3.normalize(M,M),g.push(M[0],M[1],M[2]),y.push(L,1-P),T.push(f++)}d.push(T)}for(o=0;o<I;o++)for(i=0;i<m;i++)u=d[o][i+1],s=d[o][i],c=d[o+1][i],h=d[o+1][i+1],(0!==o||A>0)&&w.push(u,s,h),(o!==I-1||a<Math.PI)&&w.push(s,c,h);return e[t]=r(R,t,x,w,y,g),e[t]}}(),Object.freeze(RedPrimitive)}();var RedMaterialInfo;!function(){var t,e,r,n,a,i;n={f:{16:"uniformMatrix4fv",12:"uniformMatrix3fv",8:"uniformMatrix2fv",4:"uniform4fv",3:"uniform3fv",2:"uniform2fv",1:"uniform1f"},i:{16:"uniformMatrix4iv",12:"uniformMatrix3iv",8:"uniformMatrix2iv",4:"uniform4iv",3:"uniform3iv",2:"uniform2iv",1:"uniform1iv"}},RedMaterialInfo=function(o,f,u){if(!(this instanceof RedMaterialInfo))return new RedMaterialInfo(o,f,u);if(!(o instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if("string"!=typeof f)throw"typeName은 문자열만 허용됩니다.";if(t=o.__datas.RedMaterialDefine,!(e=t[f]))throw f+"재질은 존재하지않습니다.";this.programInfo=e.programInfo,this.diffuseInfo=u,this.uniforms=r={},e.programInfo.makeUniformValue(this),this.needUniformList=!0;for(a in r)if((i=r[a])instanceof Float32Array||i instanceof Float64Array)i.__uniformMethod=n.f[i.length],i.__isMatrix=i.__uniformMethod.length>11;else if(i instanceof Uint8Array||i instanceof Uint16Array||i instanceof Uint32Array||i instanceof Int8Array||i instanceof Int16Array||i instanceof Int32Array)i.__uniformMethod=n.i[i.length],i.__isMatrix=i.__uniformMethod.length>11;else if(i instanceof RedAtlasUVInfo);else if(i instanceof RedTextureInfo||i instanceof RedCubeTextureInfo);else{if(!(i instanceof RedAtlasTextureInfo))throw a+"는 올바르지 않은 타입입니다.";this.uniforms.uAtlascoord=i.atlasUVInfo}this.__UUID=REDGL_UUID++},Object.freeze(RedMaterialInfo)}();var RedMaterialDefine;!function(){var t,e;RedMaterialDefine=function(r,n){if(!(this instanceof RedMaterialDefine))return new RedMaterialDefine(r,n);if(!(r instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if(!(n instanceof RedProgramInfo))throw"RedProgramInfo 인스턴스만 허용됩니다.";if(r.__datas.RedMaterialDefine||(r.__datas.RedMaterialDefine={}),e=n.key,(t=r.__datas.RedMaterialDefine)[e])throw e+"는 이미 존재하는 RedMaterialDefine 입니다.";this.programInfo=n,this.__UUID=REDGL_UUID++,t[e]=this,Object.freeze(this)},Object.freeze(RedMaterialDefine)}();var RedSceneInfo;!function(){var t;(RedSceneInfo=function(e,r,n){if(!(this instanceof RedSceneInfo))return new RedSceneInfo(e,r,n);if(!(e instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if("string"!=typeof r)throw"key는 문자열만 허용됩니다.";if(!(n instanceof RedBaseCamera))throw"camera는 RedBaseCamera 인스턴스만 허용됩니다.";if(e.__datas.RedSceneInfo||(e.__datas.RedSceneInfo={}),(t=e.__datas.RedSceneInfo)[r])throw r+"는 이미 존재하는 RedSceneInfo 입니다.";this.children=[],this.camera=n,this.lights={ambient:[],directional:[],point:[],spot:[]},this.__UUID=REDGL_UUID++,t[r]=this,Object.seal(RedSceneInfo)}).prototype={setSkyBox:function(t){this.skyBox=t},setGrid:function(t){this.grid=t},addLight:function(){var t;return function(e){if(!(e instanceof RedDirectionalLightInfo))throw"등록할수 없는 타입입니다.";if(16==(t=this.lights[RedDirectionalLightInfo.TYPE]).length)throw"직사광 최대갯수는 16개입니다.";t.push(e)}}()},Object.freeze(RedSceneInfo)}();var RedTextureInfo;!function(){var t;(RedTextureInfo=function(e,r,n,a,i,o){if(!(this instanceof RedTextureInfo))return new RedTextureInfo(e,r,n,a,i,o);if(!(e instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if("string"!=typeof r&&!(r instanceof Element&&"CANVAS"==r.nodeName))throw"src는 문자열과 캔버스 오브젝트만 허용됩니다.";var f,u,s;s=this,t=e.gl,a=a||t.RGBA,i=i||t.RGBA,o=o||t.UNSIGNED_BYTE,n=n||1,f=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,f),t.texImage2D(t.TEXTURE_2D,0,a,2,2,0,i,o,new Uint8Array(222,222,222,255,66,66,66,255,66,66,66,255,222,222,222,255)),(u=new Image).src=r instanceof Element?r.toDataURL():r,u.crossOrigin="anonymous",u.addEventListener("load",function(){s.loaded=1,s.__targetIndex=n,t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,s.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,s.__img),t.texParameterf(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.generateMipmap(t.TEXTURE_2D)}),this.__img=u,this.__targetIndex=0,this.loaded=0,this.actived=0,this.__webglTexture=1,this.__UUID=REDGL_UUID++,this.texture=f}).prototype.updateTexture=function(t){self.loaded=0,this.__img.src=t instanceof Element?t.toDataURL():t}}();var RedAtlasUVInfo;RedAtlasUVInfo=function(t){if(!(this instanceof RedAtlasUVInfo))return new RedAtlasUVInfo(t);if(!(t instanceof Array))throw"uvArray는 Array만 허용합니다.";this.value=new Float32Array(t),this.value.__UUID=this.__UUID=REDGL_UUID++,Object.freeze(this)};var RedAtlasInfo;RedAtlasInfo=function(t,e){if(!(this instanceof RedAtlasInfo))return new RedAtlasInfo(t,e);if(!(t instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";this.atlas=e,this.textureInfo=null,Object.seal(this)};var RedAtlasTextureManager;!function(){var t,e,r,n,a,i,o,f,u;n={},r=[],f=function(n){var f;if(n&&(n.width>t||n.height>t))throw t+" - 최대 허용사이즈보다 이미지가 큽니다.";(f=document.createElement("canvas")).width=t,f.height=t,f.style.background="transparent",f.style.margin="3px",f.style.display="inline-block",(o=new Atlas(f)).atlasInfo=RedAtlasInfo(a,o),++i==e&&(i=e-parseInt(e/2)),o.__targetIndex=i,r.push(o.atlasInfo)},u=function(t){var e,a,i=(o=r[0].atlas).pack(t);if(!1===i){for(e=0,a=r.length,e;e<a&&(o=r[e].atlas,!(i=o.pack(t)));e++);!1===i&&(f(t),i=o.pack(t))}return n[t.id]=new RedAtlasTextureInfo(o.uv()[t.id],o.atlasInfo),i},(RedAtlasTextureManager=function(s,c,h){if(!(this instanceof RedAtlasTextureManager))return new RedAtlasTextureManager(s,c,h);if(!(s instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";c instanceof Array||(c=[c]),a=s,t=s.detect.MAX_TEXTURE_SIZE,e=s.detect.MAX_TEXTURE_IMAGE_UNITS,void 0==i&&(i=e-parseInt(e/2)),t>4096&&(t=4096),o||f();var d,l;return d=0,l=c.length,c.forEach(function(t){var e=new Image,a=t;n[a]||(e.id=a,e.src=t,e.onload=function(){u(this);l==++d&&(r.forEach(function(t){t.textureInfo?t.textureInfo.updateTexture(t.atlas.canvas):t.textureInfo=RedTextureInfo(s,t.atlas.canvas,t.atlas.__targetIndex)}),h&&h())})}),RedAtlasTextureManager}).getByKey=function(t){return n[t]},Object.freeze(RedAtlasTextureManager)}();var RedAtlasTextureInfo;!function(){var t;t={},RedAtlasTextureInfo=function(){var e,r;return function(n,a){if(!(this instanceof RedAtlasTextureInfo))return new RedAtlasTextureInfo(n,a);if(!(n instanceof Array))throw"atlasUVInfo는 Array만 허용합니다.";if(!(a instanceof RedAtlasInfo))throw"parentAtlasInfo는 RedAtlasInfo  인스턴스만 허용합니다.";e=[n[0][0],1-n[2][1],n[1][0]-n[0][0],n[2][1]-n[0][1]],r=e.toString(),n=t[r]?t[r]:t[r]=RedAtlasUVInfo(e),this.atlasUVInfo=n,this.parentAtlasInfo=a,this.__webglAtlasTexture=1,Object.freeze(this)}}()}();var RedRender;!function(){var t,e;t=Math.sin,e=Math.cos;var r=function(t,e){e||(e=t);var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],f=t[5],u=t[6],s=t[7],c=t[8],h=t[9],d=t[10],l=t[11],M=t[12],_=t[13],R=t[14],v=t[15],m=r*f-n*o,I=r*u-a*o,E=r*s-i*o,b=n*u-a*f,A=n*s-i*f,p=a*s-i*u,x=c*_-h*M,w=c*R-d*M,y=c*v-l*M,g=h*R-d*_,T=h*v-l*_,P=d*v-l*R,L=m*P-I*T+E*g+b*y-A*w+p*x;return L?(L=1/L,e[0]=(f*P-u*T+s*g)*L,e[1]=(-n*P+a*T-i*g)*L,e[2]=(_*p-R*A+v*b)*L,e[3]=(-h*p+d*A-l*b)*L,e[4]=(-o*P+u*y-s*w)*L,e[5]=(r*P-a*y+i*w)*L,e[6]=(-M*p+R*E-v*I)*L,e[7]=(c*p-d*E+l*I)*L,e[8]=(o*T-f*y+s*x)*L,e[9]=(-r*T+n*y-i*x)*L,e[10]=(M*A-_*E+v*m)*L,e[11]=(-c*A+h*E-l*m)*L,e[12]=(-o*g+f*w-u*x)*L,e[13]=(r*g-n*w+a*x)*L,e[14]=(-M*b+_*I-R*m)*L,e[15]=(c*b-h*I+d*m)*L,e):null};(RedRender=function(n,a,i){if(!(this instanceof RedRender))return new RedRender(n,a,i);if(!(n instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";var o;o=this,this.callback=i,this.targetScene=a,this.__UUID=REDGL_UUID++,this.numDrawCall=0;var f,u,s,c,h,d,l,M,_,R,v,m,I,E,b,A,p,x,w,y,g,T,P,L,U,S,D,O,B,N,F,G,C,Y,q,z,X,j,V,k,H,K,W,Z,Q,J,$,tt,et,rt,nt,at,it,ot,ft,ut,st,ct,ht,dt,lt,Mt,_t,Rt,vt,mt,It,Et,bt,At,pt,xt,wt,yt,gt,Tt,Pt,Lt,Ut,St;It={},pt={},this.render=function(t){Et=void 0,o.callback&&o.callback(t),o.numDrawCall=0,tt=n.gl,(u=o.targetScene).camera.update();for(f in n.__datas.RedProgramInfo){var e;e=n.__datas.RedProgramInfo[f],tt.useProgram(e.program),_t=e.uniforms.uPMatrix.location,tt.uniformMatrix4fv(_t,!1,u.camera.uPMatrix),_t=e.uniforms.uCameraMatrix.location,tt.uniformMatrix4fv(_t,!1,u.camera.uCameraMatrix),o.setDirectional(e)}mt=null,tt.clear(tt.COLOR_BUFFER_BIT),o.drawSkyBox(u.skyBox,t),o.drawGrid(u.grid,t),tt.clear(tt.DEPTH_BUFFER_BIT),o.draw(u.children,t),requestAnimationFrame(o.render)},this.setDirectional=function(){var t=[],e=[];return function(r){r.uniforms.uDirectionnalLightDirection&&(t.length=0,e.length=0,u.lights.directional.forEach(function(r,n){t[3*n+0]=r.direction[0],t[3*n+1]=r.direction[1],t[3*n+2]=r.direction[2],e[4*n+0]=r.color[0]/255,e[4*n+1]=r.color[1]/255,e[4*n+2]=r.color[2]/255,e[4*n+3]=r.color[3]/255}),_t=r.uniforms.uDirectionnalLightDirection.location,tt.uniform3fv(_t,new Float32Array(t)),_t=r.uniforms.uDirectionnalLightColor.location,tt.uniform4fv(_t,new Float32Array(e)),_t=r.uniforms.uDirectionalNum.location,tt.uniform1i(_t,u.lights.directional.length))}}(),this.drawGrid=function(){var t=[];return function(e){e&&(t.length=0,t.push(e),o.draw(t))}}(),this.drawSkyBox=function(){var t=[];return function(e){e&&(e.scale[0]=e.scale[1]=e.scale[2]=u.camera.far,t.length=0,t.push(e),o.draw(t))}}(),this.draw=function(n,a,i){var u,Dt;for(u=n.length;u--;){if(o.numDrawCall++,s=n[u],c=s.uMVMatrix,c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,d=c,Q=s.position[0],J=s.position[1],$=s.position[2],d[12]=d[0]*Q+d[4]*J+d[8]*$+d[12],d[13]=d[1]*Q+d[5]*J+d[9]*$+d[13],d[14]=d[2]*Q+d[6]*J+d[10]*$+d[14],d[15]=d[3]*Q+d[7]*J+d[11]*$+d[15],I=s.rotation[0],E=s.rotation[1],b=s.rotation[2],l=t(I),R=e(I),M=t(E),v=e(E),_=t(b),m=e(b),A=d[0],p=d[1],x=d[2],y=d[4],g=d[5],T=d[6],L=d[8],U=d[9],S=d[10],z=v*m,X=l*M*m-R*_,j=R*M*m+l*_,V=v*_,k=l*M*_+R*m,H=R*M*_-l*m,K=-M,W=l*v,Z=R*v,d[0]=A*z+y*X+L*j,d[1]=p*z+g*X+U*j,d[2]=x*z+T*X+S*j,d[4]=A*V+y*k+L*H,d[5]=p*V+g*k+U*H,d[6]=x*V+T*k+S*H,d[8]=A*K+y*W+L*Z,d[9]=p*K+g*W+U*Z,d[10]=x*K+T*W+S*Z,Q=s.scale[0],J=s.scale[1],$=s.scale[2],d[0]=d[0]*Q,d[1]=d[1]*Q,d[2]=d[2]*Q,d[3]=d[3]*Q,d[4]=d[4]*J,d[5]=d[5]*J,d[6]=d[6]*J,d[7]=d[7]*J,d[8]=d[8]*$,d[9]=d[9]*$,d[10]=d[10]*$,d[11]=d[11]*$,d[12]=d[12],d[13]=d[13],d[14]=d[14],d[15]=d[15],i){var Ot=new glMatrix.ARRAY_TYPE(16);Ot[0]=i[0],Ot[1]=i[1],Ot[2]=i[2],Ot[3]=i[3],Ot[4]=i[4],Ot[5]=i[5],Ot[6]=i[6],Ot[7]=i[7],Ot[8]=i[8],Ot[9]=i[9],Ot[10]=i[10],Ot[11]=i[11],Ot[12]=i[12],Ot[13]=i[13],Ot[14]=i[14],Ot[15]=i[15],A=Ot[0],p=Ot[1],x=Ot[2],w=Ot[3],y=Ot[4],g=Ot[5],T=Ot[6],P=Ot[7],L=Ot[8],U=Ot[9],S=Ot[10],D=Ot[11],O=Ot[12],B=Ot[13],N=Ot[14],F=Ot[15],G=c[0],C=c[1],Y=c[2],q=c[3],c[0]=G*A+C*y+Y*L+q*O,c[1]=G*p+C*g+Y*U+q*B,c[2]=G*x+C*T+Y*S+q*N,c[3]=G*w+C*P+Y*D+q*F,G=c[4],C=c[5],Y=c[6],q=c[7],c[4]=G*A+C*y+Y*L+q*O,c[5]=G*p+C*g+Y*U+q*B,c[6]=G*x+C*T+Y*S+q*N,c[7]=G*w+C*P+Y*D+q*F,G=c[8],C=c[9],Y=c[10],q=c[11],c[8]=G*A+C*y+Y*L+q*O,c[9]=G*p+C*g+Y*U+q*B,c[10]=G*x+C*T+Y*S+q*N,c[11]=G*w+C*P+Y*D+q*F,G=c[12],C=c[13],Y=c[14],q=c[15],c[12]=G*A+C*y+Y*L+q*O,c[13]=G*p+C*g+Y*U+q*B,c[14]=G*x+C*T+Y*S+q*N,c[15]=G*w+C*P+Y*D+q*F}for(et=s.materialInfo,rt=et.programInfo,nt=rt.program,at=s.geometryInfo,it=at.attributes,ot=at.__attributeList,ft=rt.attributes,ct=et.uniforms,dt=rt.uniforms,Rt=at.indices,vt=it.vertexPosition,mt!=nt&&tt.useProgram(nt),mt=nt,Dt=ot.length;Dt--;)ut=ot[Dt],st=ut.shaderPointerKey,ft[st]&&(_t=ft[st].location,It[_t]==ut.__UUID||(tt.bindBuffer(tt.ARRAY_BUFFER,ut.buffer),ut.enabled||(tt.enableVertexAttribArray(_t),ut.enabled=1),tt.vertexAttribPointer(_t,ut.pointSize,ut.arrayType,ut.normalize,ut.stride,ut.offset),It[_t]=ut.__UUID));if(et.needUniformList){et.__uniformList=[];for(f in ct)et.__uniformList.push({key:f,value:ct[f],location:dt[f].location});et.needUniformList=!1}Dt=(ht=et.__uniformList).length;for(var Bt=!0;Dt--;)if(lt=ht[Dt].key,Mt=ht[Dt].value,_t=ht[Dt].location,"uAtlascoord"==lt)yt==ct[lt].__UUID||tt.uniform4fv(_t,ct[lt].value),yt=ct[lt].__UUID;else if(Mt.__uniformMethod)Mt.__isMatrix?tt[Mt.__uniformMethod](_t,!1,ct[lt]):tt[Mt.__uniformMethod](_t,ct[lt]);else if(Mt.__webglAtlasTexture){var Nt;Nt=Mt.parentAtlasInfo.textureInfo,void 0==pt[Nt.__targetIndex]&&(Bt=!1),Nt.loaded&&(pt[Nt.__targetIndex]!=Nt.__UUID&&(Nt.actived||tt.activeTexture(tt.TEXTURE0+Nt.__targetIndex),Nt.actived=1,tt.bindTexture(tt.TEXTURE_2D,Nt.texture),pt[Nt.__targetIndex]=Nt.__UUID),xt!=Nt.__targetIndex&&tt.uniform1i(_t,Nt.__targetIndex),xt=Nt.__targetIndex)}else if(Mt.__webglTexture)void 0==bt&&(Bt=!1),Mt.loaded&&(bt!=Mt.__UUID&&(Mt.actived||tt.activeTexture(tt.TEXTURE0+Mt.__targetIndex),Mt.actived=1,tt.bindTexture(tt.TEXTURE_2D,Mt.texture),bt=Mt.__UUID),xt!=Mt.__targetIndex&&tt.uniform1i(_t,Mt.__targetIndex),xt=Mt.__targetIndex);else{if(!Mt.__webglCubeTexture)throw"안되는 나쁜 타입인거야!!";void 0==At&&(Bt=!1),Mt.loaded&&(At!=Mt.__UUID&&(Mt.actived||tt.activeTexture(tt.TEXTURE0+Mt.__targetIndex),Mt.actived=1,tt.bindTexture(tt.TEXTURE_CUBE_MAP,Mt.texture),At=Mt.__UUID),wt!=Mt.__targetIndex&&tt.uniform1i(_t,Mt.__targetIndex),wt=Mt.__targetIndex)}dt.uNMatrix&&(h=mat4.clone(c),r(h,h),mat4.transpose(h,h),tt.uniformMatrix4fv(dt.uNMatrix.location,!1,h)),tt.uniformMatrix4fv(dt.uMVMatrix.location,!1,c),gt!=s.useCullFace&&((gt=s.useCullFace)?tt.enable(tt.CULL_FACE):tt.disable(tt.CULL_FACE)),Tt!=s.cullFace&&(tt.cullFace(s.cullFace),Tt=s.cullFace),Ut!=s.useDepthTest&&((Ut=s.useDepthTest)?tt.enable(tt.DEPTH_TEST):tt.disable(tt.DEPTH_TEST)),St!=s.depthTestFunc&&tt.depthFunc(St=s.depthTestFunc),Pt!=s.useBlendMode&&((Pt=s.useBlendMode)?tt.enable(tt.BLEND):tt.disable(tt.BLEND)),Lt!=s.blendFactor1+s.blendFactor2&&(tt.blendFunc(s.blendFactor1,s.blendFactor2),Lt=s.blendFactor1+s.blendFactor2),Rt?Bt&&(Et==Rt.__UUID||tt.bindBuffer(tt.ELEMENT_ARRAY_BUFFER,Rt.buffer),tt.drawElements(s.drawMode,Rt.pointNum,tt.UNSIGNED_SHORT,0),Et=Rt.__UUID):(tt.drawArrays(s.drawMode,0,vt.pointNum),Et=vt.__UUID),s.children.length&&o.draw(s.children,a,c)}}}).prototype={start:function(){requestAnimationFrame(this.render)},pause:function(){},resume:function(){}},Object.freeze(RedRender)}();var redGLDetect;!function(){var t,e,r,n,a,i;redGLDetect=function(o){if(!(this instanceof redGLDetect))return new redGLDetect(o);if(!(o instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";for(i=o.gl,t="VENDOR,VERSION,SHADING_LANGUAGE_VERSION,RENDERER,MAX_VERTEX_ATTRIBS,MAX_VARYING_VECTORS,MAX_VERTEX_UNIFORM_VECTORS,MAX_VERTEX_TEXTURE_IMAGE_UNITS,MAX_FRAGMENT_UNIFORM_VECTORS,MAX_TEXTURE_SIZE,MAX_CUBE_MAP_TEXTURE_SIZE,MAX_COMBINED_TEXTURE_IMAGE_UNITS,MAX_TEXTURE_IMAGE_UNITS,MAX_RENDERBUFFER_SIZE,MAX_VIEWPORT_DIMS,RED_BITS,GREEN_BITS,BLUE_BITS,ALPHA_BITS,DEPTH_BITS,STENCIL_BITS".split(","),e=/[_]\S/g,r=function(t){return t.charAt(1).toUpperCase()},n=t.length;n--;)this[a=t[n]]=i.getParameter(i[a])}}();var RedSkyBoxInfo;RedSkyBoxInfo=function(t,e){if(!(this instanceof RedSkyBoxInfo))return new RedSkyBoxInfo(t,e);if(!(t instanceof RedGL))throw"RedGL 인스턴스만 허용됩니다.";if(!(e instanceof Array))throw"srcList는 Array만 허용됩니다.";if(6!=e.length)throw"srcList는 6개여야 합니다.";RedMeshBaseInfo.call(this,t),this.materialInfo=RedMaterialInfo(t,"skybox",RedCubeTextureInfo(t,e)),this.geometryInfo=RedPrimitive.cube(t),this.scale[0]=1e3,this.scale[1]=1e3,this.scale[2]=1e3,this.cullFace=t.gl.FRONT},Object.freeze(RedSkyBoxInfo);var RedGL,REDGL_UUID;!function(){var t,e=[];REDGL_UUID=0,t=function(){var t,e,r,n;return e={alpha:!1,depth:!0,failIfMajorPerformanceCaveat:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1},t="experimental-webgl,webgl,webkit-3d,moz-webgl,3d".split(","),function(a){for(n=t.length;n--;)if(r=a.getContext(t[n],e))return r;throw"웹지엘을 사용할수없습니다."}}(),RedGL=function(r,n){if(!(this instanceof RedGL))return new RedGL(r,n);var a;this.__canvas=r,this.gl=a=t(r),n&&this.setSize(),this.fullMode=n,this.__UUID=REDGL_UUID++,this.__datas={},this.detect=redGLDetect(this),a.enable(a.DEPTH_TEST),a.depthFunc(a.LESS),a.frontFace(a.CCW),a.enable(a.CULL_FACE),a.cullFace(a.BACK),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0),a.enable(a.SCISSOR_TEST),a.scissor(0,0,a.drawingBufferWidth,a.drawingBufferHeight),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),e.push(this)},window.addEventListener("resize",function(){e.forEach(function(t){t.fullMode&&t.setSize()})}),RedGL.prototype={setSize:function(t,e){var r,n,a;n=t||(document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),a=e||(document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),r=this.gl,n=n,a=a,this.__canvas.width=n*window.devicePixelRatio,this.__canvas.height=a*window.devicePixelRatio,this.__canvas.style.width=n,this.__canvas.style.height=a,r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.enable(r.SCISSOR_TEST),r.scissor(0,0,r.drawingBufferWidth,r.drawingBufferHeight)},calcNormal:function(){var t,e,r;return t=Math.sqrt,e={x:0,y:0,z:0},r={x:0,y:0,z:0},function(n,a){var i,o,f,u,s=new Float32Array(n.length);for(i=0,o=n.length;i<o;i++)s[i]=0;for(i=0,o=a.length;i<o;i+=3)for(f=3*a[i+1],u=3*a[i],e.x=n[f]-n[u],e.y=n[f+1]-n[u+1],e.z=n[f+2]-n[u+2],u=3*a[i+2],r.x=n[u]-n[f],r.y=n[u+1]-n[f+1],r.z=n[u+2]-n[f+2],f=0;f<3;f++)s[u=3*a[i+f]]+=e.y*r.z-e.z*r.y,s[u+1]+=e.z*r.x-e.x*r.z,s[u+2]+=e.x*r.y-e.y*r.x;for(i=0,o=n.length;i<o;i+=3)e.x=s[i],e.y=s[i+1],e.z=s[i+2],f=t(e.x*e.x+e.y*e.y+e.z*e.z)||1e-5,s[i]=e.x/f,s[i+1]=e.y/f,s[i+2]=e.z/f;return s}}(),getSourceFromScript:function(){var t,e,r;return function(n){if(!(t=document.getElementById(n)))throw"쉐이더소스가 없음!";for(e="",r=t.firstChild;r;)3==r.nodeType&&(e+=r.textContent),r=r.nextSibling;return e}}(),createShaderInfo:function(t,e,r){return new RedShaderInfo(this,t,e,r)},getShaderInfo:function(t,e){return this.__datas.shaderInfo[e][t]},createProgramInfo:function(t,e,r,n){return new RedProgramInfo(this,t,e,r,n)},getProgramInfo:function(t){return this.__datas.RedProgramInfo[t]},createArrayBufferInfo:function(t,e,r,n,a,i,o,f,u,s){return new RedBufferInfo(this,RedBufferInfo.ARRAY_BUFFER,t,e,r,n,a,i,o,f,u,s)},createIndexBufferInfo:function(t,e,r,n,a,i,o,f,u){return new RedBufferInfo(this,RedBufferInfo.ELEMENT_ARRAY_BUFFER,t,null,e,r,n,a,i,o,f,u)},getArrayBufferInfo:function(t){return this.__datas.RedBufferInfo[t]},getIndexBufferInfo:function(t){return this.__datas.RedBufferInfo[t]},createGeometryInfo:function(t,e,r,n,a){return new RedGeometryInfo(this,t,e,r,n,a)},getGeometryInfo:function(t){return this.__datas.RedGeometryInfo[t]},createMaterialDefine:function(t){return new RedMaterialDefine(this,t)},createMaterialInfo:function(t,e){return new RedMaterialInfo(this,t,e)},createTextureInfo:function(t,e,r,n,a,i){return new RedTextureInfo(this,t,e,r,n,a,i)},createMeshInfo:function(t,e,r){return new RedMeshInfo(this,t,e,r)},getMeshInfo:function(t){return this.__datas.RedMeshInfo[t]},createSceneInfo:function(t,e){return new RedSceneInfo(this,t,e)}}}();var Atlas;!function(){var t;(t=function(t,e,r,n){this.x=t,this.y=e,this.w=r,this.h=n}).prototype.fitsIn=function(t){return t.w>=this.w&&t.h>=this.h},t.prototype.sameSizeAs=function(t){return this.w===t.w&&this.h===t.h},(Atlas=function(e,r,n,a){1===arguments.length&&(this.canvas=e,e=r=0,n=this.canvas.width,a=this.canvas.height),2===arguments.length&&(n=e,a=r,e=r=0),this.left=this.right=null,this.rect=new t(e,r,n,a),this.filled=!1,this.tilepad=!1,this._cache=[],this._uvcache=Object.create(null)}).prototype.pack=function(t){return this._cache=[],this._uvcache=Object.create(null),t=this._toRect(t),this.img&&this.tilepad&&(t=this._tilepad(t)),null!==this.left?this._ontoCanvas(this.left.pack(t)||this.right.pack(t)):!(this.filled||!t.fitsIn(this.rect))&&(t.sameSizeAs(this.rect)?(this.filled=!0,this._ontoCanvas(this)):(this.rect.w-t.w>this.rect.h-t.h?(this.left=new Atlas(this.rect.x,this.rect.y,t.w,this.rect.h),this.right=new Atlas(this.rect.x+t.w,this.rect.y,this.rect.w-t.w,this.rect.h)):(this.left=new Atlas(this.rect.x,this.rect.y,this.rect.w,t.h),this.right=new Atlas(this.rect.x,this.rect.y+t.h,this.rect.w,this.rect.h-t.h)),this._ontoCanvas(this.left.pack(t))))},Atlas.prototype.expand=function(t){var e=this;t=this._toRect(t),this.img&&this.tilepad&&(t=this._tilepad(t));var r;if(this.rect.w<this.rect.h?((r=new Atlas(0,0,this.rect.w+t.w,this.rect.h)).right=new Atlas(this.rect.w,0,t.w,this.rect.h),r.left=this):((r=new Atlas(0,0,this.rect.w,this.rect.h+t.h)).right=new Atlas(0,this.rect.h,this.rect.w,t.h),r.left=this),["canvas","context","img"].forEach(function(t){e[t]&&(r[t]=e[t],e[t]=null)}),r.canvas){r.context||(r.context=r.canvas.getContext("2d"));var n=r.context.getImageData(0,0,r.canvas.width,r.canvas.height);r.canvas.width=r.rect.w,r.canvas.height=r.rect.h,r.context.putImageData(n,0,0)}return!1===r.pack(t)?r.expand(t):r},Atlas.prototype.index=function(){var t=this;return t._cache.length>0?t._cache:(function e(r){null!==r.left?(e(r.left),e(r.right)):r.rect.name&&t._cache.push(r.rect)}(t),t._cache)},Atlas.prototype.uv=function(t,e){var r=this;t=t||r.rect.w,e=e||r.rect.h;var n=this.tilepad;return function a(i){if(null!==i.left)a(i.left),a(i.right);else if(void 0!==i.rect.name){var o=n?i.rect.w/4:0;r._uvcache[i.rect.name]=[[i.rect.x+o,i.rect.y+o],[i.rect.x+o+(i.rect.w-2*o),i.rect.y+o],[i.rect.x+o+(i.rect.w-2*o),i.rect.y+o+(i.rect.h-2*o)],[i.rect.x+o,i.rect.y+o+(i.rect.h-2*o)]].map(function(r){return 0!==r[0]&&(r[0]=r[0]/t),0!==r[1]&&(r[1]=r[1]/e),r})}}(r),r._uvcache},Atlas.prototype.json=function(t){var e=this;return t?("string"==typeof t&&(t=JSON.parse(t)),function t(e){if(e&&e.rect){var r=new Atlas(e.rect.x,e.rect.y,e.rect.w,e.rect.h);return e.left&&(r.left=t(e.left)),e.right&&(r.right=t(e.right)),r}}(t)):JSON.stringify(function t(e){var r={left:null,right:null,rect:e.rect,filled:e.filled};return null!==e.left&&(r.left=t(e.left),r.right=t(e.right)),r}(e),null,2)},Atlas.prototype._tilepad=function(e){var r=this.img;if(!r)return e;var n=r.width/2,a=document.createElement("canvas");a.name=r.name||r.src,a.id=r.id||"",a.width=r.width+r.width,a.height=r.height+r.height;var i=a.getContext("2d"),o=i.createPattern(r,"repeat");return i.fillStyle=o,i.translate(n,n),i.fillRect(-n,-n,a.width+n,a.height+n),i.translate(-n,-n),this.img=a,new t(e.x,e.y,this.img.width,this.img.height)},Atlas.prototype._ontoCanvas=function(t){return t&&this.img&&this.canvas&&(this.context||(this.context=this.canvas.getContext("2d")),this.canvas.ctx=this.context,this.context.clearRect(t.rect.x,t.rect.y,t.rect.w,t.rect.h),this.context.drawImage(this.img,t.rect.x,t.rect.y,t.rect.w,t.rect.h),t.rect.name=this.img.id||this.img.name||this.img.src||null),t},Atlas.prototype._toRect=function(e){return!e.nodeName||"IMG"!==e.nodeName&&"CANVAS"!==e.nodeName||(this.img=e,e=new t(e.x,e.y,e.width,e.height)),e instanceof t||(e=new t(e.x||0,e.y||0,e.w||e.width,e.h||e.height)),e},Atlas.prototype._debug=function(){if(this.canvas){var t=this.canvas.getContext("2d");this.index().forEach(function(e){t.lineWidth=1,t.strokeStyle="red",t.strokeRect(e.x,e.y,e.w,e.h)})}}}();console.log('LOGIN Release. last update(2017-11-29 15:15:20)');